<!DOCTYPE html>
<!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	Page:	Custom Alarms
	File:	customalarms.html		v4.0.1
	Author:	D.N.C.Thomas		  Feb 2025
	Last Edit:	2025-02-07
	Last Check:	2024-04-05
	~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-->
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>CumulusMX Custom Alarms</title>
		<link rel="icon" type="image/png" href="img/favicon.png">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="" id="metaDescription">
		<meta name="author" content="Neil Thomas 2023">

		<!--	Fonts	-->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Red+Rose:wght@400;500;600&display=swap">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer">

		<!--	jQuery CDN	(Use for public website)	-->
		<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>-->
		<!--	jQuery Local	(Use for AI unless you have a reliable internet connection)	-->
		<script src="/lib/jquery/jquery-latest.min.js"></script>
		<script src="/lib/jquery/jquery.tmpl.js"></script>

		<!-- Bootstrap -->
		<link href="/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
		<link href="/lib/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet" >
		<script src="/lib/bootstrap/js/bootstrap.min.js"></script>

		<!-- Alpaca -->
		<script src="/lib/handlebars/handlebars.min.js"></script>
		<link href="/lib/alpaca/alpaca.min.css" rel="stylesheet" >
		<script src="/lib/alpaca/alpaca.min.js"></script>

		<!--	Sitewide Styles		-->
		<link rel="stylesheet" href="css/w3Pro+.css">
		<link rel="stylesheet" href="themes/Martini-Olive.css" id="theme">
		<link rel="stylesheet" href="css/main.css?v1.2">
		<link rel="stylesheet" href="css/alpacaforms.css">

		<!--	Sitewide Scripts	-->
		<script src="js/ai-pagemanager.js"></script>
		<script src="js/useralarms.js"></script>

		<!--	Local scripts & styles	-->
		<style>
			.ow-listItem p:nth-of-type(1) { width: 7em; flex: none; font-weight: 700;}

			.alpaca-field-table table tr td .alpaca-field,
			.alpaca-field-table table tr td .alpaca-field .form-control,
			table.dt-rowReorder-float tr td .alpaca-field,
			table.dt-rowReorder-float tr td .alpaca-field .form-control {
				min-width: 20px;
			}

			.form-control {
				padding: 6px 6px !important;
			}
			.alpaca-field-object {padding: 0!important;}

			th:nth-of-type(1),
			td:nth-of-type(1) { width: 4em!important;}

			th:nth-of-type(2),
			td:nth-of-type(2) { width: 150px!important;}

			th:nth-of-type(3),
			td:nth-of-type(3) { width: 90px !important;}

			th:nth-of-type(4),
			td:nth-of-type(4) { min-width: 90px !important;	}

			th:nth-of-type(5),
			td:nth-of-type(5) { min-width: 50px !important; }

			th:nth-of-type(6),
			td:nth-of-type(6) { min-width: 55px !important; }

			th:nth-of-type(7),
			td:nth-of-type(7) { min-width: 150px !important; }

			th:nth-of-type(8),
			td:nth-of-type(8) { min-width: 50px !important;	}

			button.btn { background-image: linear-gradient( var(--theme-sub3) ,var(--theme))!important;}
		</style>
	</head>
	<body class="ow-theme-add5">
		<header id="PageBanner" class="ow-theme w3-bottombar ow-theme-sub5-bdr">
			<div class="siteWidth ow-titleBar" style=" margin:auto;">
				<img src="img/Interface-Logo.png" alt="CMX Logo" id="siteLogo" class="w3-image">
					<h5 class="w3-align-right">
					Latitude:&nbsp;<span data-cmxData="Latitude">xx.xxxx</span><span class="VBar"></span>
					Longitude:&nbsp;<span data-cmxData="Longitude">Â±yy.yyyy</span><span class="VBar"></span>
					Altitude:&nbsp;<span data-cmxData="Altitude">xxm</span>
				</h5>
			</div>

			<div id="Menues" class="ow-theme-add3" style="border-top: 1px solid var(--sub3); min-height: 33px;">
				<!--	The menus are inserted here	-->
			</div>

		</header>

		<div id="content">
			<img src="img/seagull-LF.png" id="ow-gullRight" alt="seagull">
			<div class="siteWidth">
				<div class="ow-titleBar" style="margin-bottom:1vh;">
					<h1>User Alarm Settings</h1>
				</div>

				<div class="ax-column1" style="margin-bottom: 2vh;">
					<div class="ow-card ow-theme-add4">
						<div class="ow-titleBar" style="margin: 1vh 0;">
							<h2>User Alarms</h2>
							<p>Set up your own alarms to display on the dashboard and optionally send you emails / perform custom actions</p>
						</div>
						<form id="alarmsForm"></form>

					</div>
				</div>

				<div class="ow-twoCol">
					<div class="ow-container" style="order:0; border-right: 1px solid var(--theme);">
						<div class="ow-titleBar"><h4>Notes</h4></div>
						<div class="ow-listItem">
							<p>Name:</p>
							<p>A descriptive name for the alarm, this will appear in emails and the diagnostic log.<br>
							- The name should be unique and short.</p>
						</div>
						<div class="ow-listItem">
							<p>Web Tag:</p>
							<p>Enter a <b><i>single</i></b> valid numeric or boolean web tag to be tested.<br>
							- If the tag is a decimal value and your locale uses comma decimals, you must use the rc=y web tag option.<br>
							- You can use boolean web tags, they are treated as numeric values 0 (false) or 1 (true).</p>
						</div>
						<div class="ow-listItem">
							<p>Type:</p>
							<p>Determines if the alarm is triggered if the web tag value is above or below the alarm value.</p>
						</div>
						<div class="ow-listItem">
							<p>Value:</p>
							<p>The alarm threshold value to be tested against the web tag value.</p>
						</div>
					</div>
					<div class="ow-container" style="order:0;">
						<div class="ow-titleBar"><h4>&nbsp;</h4></div>
						<div class="ow-listItem">
							<p><strong>Email</strong></p>
							<p>Controls if the alarm sends an email when triggered. The email values from the standard alarms are used.</p>
						</div>
						<div class="ow-listItem">
							<p>Email Msg</p>
							<p>Text to send in the email, you can use the parameter {0} to represent the current web tag value.</p>
						</div>
						<div class="ow-listItem">
							<p>Bluesky Template:</p>
							<p>Path to a Bluesky template file (see Third party uploads for template details) to create a post to Bluesky when the alarm occurs.<br>
								Leaving this field blank suppresses the creation of a post.</p>
						</div>
						<div class="ow-listItem">
							<p>Latch:</p>
							<p>Controls if the alarm is latched. If latched, the alarm will not be triggered again until the latch hours expire.</p>
						</div>
						<div class="ow-listItem">
							<p>Latch Hours:</p>
							<p>The number of hours the alarm is latched for.</p>
						</div>
						<div class="ow-listItem">
							<p>Action:</p>
							<p>If non-blank, a program or script that is executed when the alarm is triggered.</p>
						</div>
						<div class="ow-listItem">
							<p>Action Params:</p>
							<p>Parameters to be passed to the action program or script, the parameters can contain web tags.</p>
						</div>
					</div>
				</div>
				<!--	End of two column section	-->
			</div>
		</div>

		<footer class="ow-theme w3-topbar ow-theme-sub5-bdr" style="min-height: 3em; z-index:300;">
			<div class="siteWidth">
				<div class="" style="display: flex; justify-content: space-between; flex-flow: row wrap;">
					<h6 class="w3-theme-add4-txt ow-txt-small"><em>Template <span class="w3-hide-small"> design</span> v<span data-OWdata="Version"></span> by N Thomas</em></h6>
					<h6 class="w3-right-align">
						Powered by <span class="ow-theme-add3-txt">CumulusMX</span>
						V<span data-cmxdata="Version">X.YY.Z</span>
						(b:<span data-cmxdata="Build">xxxx</span>)
					</h6>
				</div>
			</div>
		</footer>

	</body>
</html>
